<style>.ui-controls-area{position:absolute;left:0;right:0;bottom:0;top:0;z-index:100}.ui-controls{position:absolute;z-index:1;transform-origin:top left;padding:10px 0}.ui-controls-items{background-color:#FFF;padding:5px;border-radius:var(--radius);box-shadow:2px 5px 10px rgba(0,0,0,0.05);border:1px solid #E0E0E0;position:relative}.ui-controls-submenu{position:absolute;z-index:101;background-color:#FFF;padding:5px 3px;border-radius:var(--radius);box-shadow:2px 5px 10px rgba(0,0,0,0.05);border:1px solid #E0E0E0}.ui-controls-visible{}.ui-controls-items ul{margin:0;padding:0;height:26px}.ui-controls-items li{margin:0 2px;padding:0 5px;list-style-type:none;font-size:12px;cursor:pointer;max-width:150px;float:left;line-height:26px;height:26px;border-radius:var(--radius)}.ui-controls-submenu ul{margin:0;padding:0}.ui-controls-submenu li{margin:0 2px;padding:0 5px;list-style-type:none;font-size:12px;cursor:pointer;max-width:150px;line-height:26px;height:26px;border-radius:var(--radius)}.ui-controls-name{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ui-controls-selected{background-color:#F5F5F5;border-radius:var(--radius)}.ui-controls li:hover{background-color:#F0F0F0}.ui-controls-name i{width:16px;margin:0;text-align:center;color:#000}.ui-controls-name span{margin-left:5px}.ui-controls-divider{padding:0 !important;background:transparent !important;cursor:default !important;color:gray;font-size:11px !important;border-right:1px solid #E0E0E0;height:24px;border-radius:0 !important}.ui-controls-divider span{display:block;padding:0 10px 0 5px}.ui-controls-divider hr{margin:5px 0;border-color:#E0E0E0}.ui-controls li.ui-controls-disabled{color:#a0a0a0;background-color:#FFF;cursor:not-allowed}.ui-controls li.ui-controls-disabled i{color:#c5c5c5}.ui-dark .ui-controls-items,.ui-dark .ui-controls-submenu{background-color:#303030;border-color:#353535;box-shadow:1px 5px 10px rgba(0,0,0,0.2)}.ui-dark .ui-controls-name i{color:#FFF}.ui-dark .ui-controls-selected{background-color:#252525}.ui-dark .ui-controls li:hover{background-color:#202020}.ui-dark .ui-controls-divider{border-color:#404040}.ui-dark .ui-controls li.ui-controls-disabled{background-color:#303030;color:#656565}.ui-dark .ui-controls li.ui-controls-disabled i{color:#525252}.ui-large .ui-controls-items li{line-height:32px;height:32px}.ui-large .ui-controls-items ul{height:32px}.ui-large .ui-controls-submenu li{line-height:30px;height:30px}.ui-large .ui-controls-divider{font-size:14px !important}.ui-large .ui-controls li{font-size:14px;padding:0 10px}</style>
<script>COMPONENT('controls@1',function(self,config,cls){self.singleton();self.readonly();self.nocompile&&self.nocompile();var cls2='.'+cls,is=false,issubmenu=false,events={},ul,children,prevsub,parentclass,container;self.make=function(){self.aclass('hidden '+cls+'-area');self.append('<div class="{0} {0}-style-{1}"><div class="{0}-items"><ul></ul></div><div class="{0}-submenu hidden"><ul></ul></div>'.format(cls,config.style));container=self.find('> '+cls2);ul=self.find(cls2+'-items').find('ul');children=self.find(cls2+'-submenu');self.element.on('click',function(e){if(e.target===self.dom)self.hide()});self.event('click','li',function(e){var el=$(this);if(!el.hclass(cls+'-divider')&&!el.hclass(cls+'-disabled')){self.opt.scope&&M.scope(self.opt.scope);var index=el.attrd('index').split('-');if(index.length>1){self.opt.callback(self.opt.items[+index[0]].children[+index[1]]);self.hide()}else if(!issubmenu){self.opt.callback(self.opt.items[+index[0]]);self.hide()}}e.preventDefault();e.stopPropagation()});events.hide=function(){is&&self.hide()};self.event('scroll',events.hide);self.on('reflow + scroll + resize + resize2',events.hide);events.hidechildren=function(){if($(this.parentNode.parentNode).hclass(cls+'-items')){if(prevsub&&prevsub[0]!==this){prevsub.rclass(cls+'-selected');prevsub=null;children.aclass('hidden');issubmenu=false}}};events.children=function(){if(prevsub&&prevsub[0]!==this){prevsub.rclass(cls+'-selected');prevsub=null}issubmenu=true;var el=prevsub=$(this);var index=+el.attrd('index');var item=self.opt.items[index];el.aclass(cls+'-selected');var html=self.makehtml(item.children,index);children.find('ul').html(html);children.rclass('hidden');var css={},offset=el.position();css.left=offset.left+2;css.top=offset.top+49+(self.element.hclass('ui-large')?5:0);var offsetX=offset.left;offset=self.element.offset();var w=children.width();var left=offset.left+css.left+w;if(left>WW+30)css.left=(offsetX-w)+5;children.css(css)}};self.bindevents=function(){events.is=true;$(document).on('touchstart mouseenter mousedown',cls2+'-children',events.children);$(W).on('scroll',events.hide);self.element.on('mouseenter','li',events.hidechildren)};self.unbindevents=function(){events.is=false;$(document).off('touchstart mouseenter mousedown',cls2+'-children',events.children);$(W).off('scroll',events.hide);self.element.off('mouseenter','li',events.hidechildren)};self.showxy=function(x,y,items,callback){var opt={};opt.x=x;opt.y=y;opt.items=items;opt.callback=callback;self.show(opt)};self.makehtml=function(items,index){var builder=[],tmp;for(var i=0;i<items.length;i++){var item=items[i];if(typeof(item)==='string'){if(item==='-')tmp=index==null?'':'<hr />';else tmp='<span>{0}</span>'.format(item);builder.push('<li class="{0}-divider">{1}</li>'.format(cls,tmp));continue}var cn=item.classname||'',icon='';if(item.icon)icon='<i class="{0}"></i>'.format(item.icon.charAt(0)==='!'?item.icon.substring(1):item.icon.indexOf('fa-')===-1?('fa fa-'+item.icon):item.icon);else cn=(cn?(cn+' '):'')+cls+'-nofa';tmp='';if(index==null&&item.children&&item.children.length)cn+=(cn?' ':'')+cls+'-children';if(item.selected)cn+=(cn?' ':'')+cls+'-selected';if(item.disabled)cn+=(cn?' ':'')+cls+'-disabled';tmp+='<div class="{0}-name">{1}{2}{3}</div>'.format(cls,icon,item.name?('<span>'+item.name+'</span>'):'');builder.push('<li class="{0}" data-index="{2}" title="{3}">{1}</li>'.format(cn,tmp,(index!=null?(index+'-'):'')+i,item.title||''))}return builder.join('')};self.show=function(opt){if(typeof(opt)==='string'){opt={align:opt};opt.element=arguments[1];opt.items=arguments[2];opt.callback=arguments[3];opt.offsetX=arguments[4];opt.offsetY=arguments[5]}var tmp=opt.element?opt.element instanceof jQuery?opt.element[0]:opt.element.element?opt.element.dom:opt.element:null;if(is&&tmp&&self.target===tmp){self.hide();return}var tmp;self.target=tmp;self.opt=opt;opt.scope=M.scope();if(parentclass&&opt.classname!==parentclass){self.rclass(parentclass);parentclass=null}self.tclass('ui-large',opt.large==true);issubmenu=false;prevsub=null;var css={};children.aclass('hidden');children.find('ul').empty();ul.html(self.makehtml(opt.items));if(!parentclass&&opt.classname){self.aclass(opt.classname);parentclass=opt.classname}if(is){css.left=0;css.top=0;container.css(css)}else{self.rclass('hidden');self.aclass(cls+'-visible',100);is=true;if(!events.is)self.bindevents()}var target=$(opt.element);var w=container.width();var offset=target.offset();if(opt.element){switch(opt.align){case'center':css.left=Math.ceil((offset.left-w/2)+(target.innerWidth()/2));break;case'right':css.left=(offset.left-w)+target.innerWidth();break;default:css.left=offset.left;break}css.top=opt.position==='bottom'?(offset.top-container.height()-10):(offset.top+target.innerHeight()+10)}else{css.left=opt.x;css.top=opt.y}if(opt.position==='bottom')css.top+=10;else css.top-=10;if(opt.offsetX)css.left+=opt.offsetX;if(opt.offsetY)css.top+=opt.offsetY;var mw=w,mh=container.height();if(css.left<0)css.left=10;else if((mw+css.left)>WW)css.left=(WW-mw)-10;if(css.top<0)css.top=10;else if((mh+css.top)>WH)css.top=(WH-mh)-10;container.css(css)};self.hide=function(){events.is&&self.unbindevents();is=false;self.opt&&self.opt.hide&&self.opt.hide();self.target=null;self.opt=null;self.aclass('hidden');self.rclass(cls+'-visible')}});</script>